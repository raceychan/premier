premier:
  keyspace: "example-api-gateway"
  
  paths:
    # User endpoints - moderate caching and rate limiting
    - pattern: "/api/users*"
      features:
        cache:
          expire_s: 300  # 5 minutes cache
        rate_limit:
          quota: 100     # 100 requests per minute
          duration: 60
          algorithm: "sliding_window"
        timeout:
          seconds: 10.0
        retry:
          max_attempts: 3
          wait: 1.0
        monitoring:
          log_threshold: 0.2  # Log requests >200ms
    
    # Product endpoints - longer caching (less frequent updates)
    - pattern: "/api/products*"
      features:
        cache:
          expire_s: 600  # 10 minutes cache
        rate_limit:
          quota: 200     # Higher limit for product browsing
          duration: 60
          algorithm: "token_bucket"
        timeout:
          seconds: 15.0
        monitoring:
          log_threshold: 0.3
    
    # Admin endpoints - strict rate limiting
    - pattern: "/api/admin/*"
      features:
        rate_limit:
          quota: 10      # Very restrictive for admin operations
          duration: 60
          algorithm: "fixed_window"
        timeout:
          seconds: 30.0  # Longer timeout for admin operations
        retry:
          max_attempts: 2
          wait: 2.0
        monitoring:
          log_threshold: 0.1  # Log all admin requests >100ms
    
    # Search endpoint - aggressive caching due to expensive operation
    - pattern: "/api/search*"
      features:
        cache:
          expire_s: 1800  # 30 minutes cache for search results
        rate_limit:
          quota: 30       # Limit expensive search operations
          duration: 60
          algorithm: "leaky_bucket"
          bucket_size: 10
        timeout:
          seconds: 20.0
        retry:
          max_attempts: 2
          wait: 1.5
        monitoring:
          log_threshold: 0.5
    
    # Bulk processing - very strict rate limiting
    - pattern: "/api/bulk/*"
      features:
        rate_limit:
          quota: 5        # Very low limit for bulk operations
          duration: 60
          algorithm: "token_bucket"
        timeout:
          seconds: 60.0   # Long timeout for bulk processing
        retry:
          max_attempts: 1  # No retries for bulk operations
        monitoring:
          log_threshold: 1.0
    
    # Slow endpoint - shorter timeout to test timeout handling
    - pattern: "/api/slow"
      features:
        timeout:
          seconds: 5.0    # Will timeout for some requests
        retry:
          max_attempts: 2
          wait: 1.0
        monitoring:
          log_threshold: 3.0
    
    # Unreliable endpoint - focus on retry logic
    - pattern: "/api/unreliable"
      features:
        retry:
          max_attempts: 5  # More retries for unreliable endpoint
          wait: 0.5
        timeout:
          seconds: 10.0
        monitoring:
          log_threshold: 0.1
  
  # Default features for all other endpoints
  default_features:
    timeout:
      seconds: 10.0
    rate_limit:
      quota: 60        # Default 1 request per second
      duration: 60
      algorithm: "sliding_window"
    monitoring:
      log_threshold: 1.0  # Log requests >1s